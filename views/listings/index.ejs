<% layout("layouts/boilerplate") %>
<body>
    <h2>All Listings</h2>
    <!-- <form method=" get" action="/listings/new">
        <button>Create new Listings</button>
    </form> -->




    <!-- to arrange the cards in row we add them in div row -->

    <div class="row">
        <% for(let listing of allListings) { %>
            <div class="row row-col-lg-3 row-cols-md-2 row-cols-sm-1" style="width: 20rem;">
                <img src="<%=listing.image.url %>" class="card-img-top" alt="listing_image">
                <div class="card-body">
                <p class="card-text">
                    <%= listing.title %> <br/>
                    &#8377; <%= listing.price.toLocaleString("en-IN") %> /night
    
                     <h5 class="card-title"><%= listing.title %></h5>
                    <p class="card-text">Price: $<%= listing.price %></p>
                    <a href="/listings/<%= listing._id %>" class="btn btn-primary">View Details</a>
                    <form method="post" action="/listings/<%= listing._id %>?_method=delete">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                    <form method="get" action="/listings/<%= listing._id %>/edit">
                        <button type="submit" class="btn btn-warning">Edit</button>
                    </form>
                    <p class="card-text">
                        <small class="text-muted">Last updated: <%= listing.updatedAt %></small>
                    </p> 
                </p>
                </div>
            </div>
        <% } %>
    
    </div>


    

    <uL>
        <% for(let listing of allListings) { %>
            <li><a href= "/listings/<%= listing._id %>"> <%= listing.title %></a></li>


            <li>
                <h3><%= listing.name %></h3>
                <p>Rating: <%= listing.rating %></p>
                <p>Price: $<%= listing.price %></p>
                <p>Description: <%= listing.description %></p>
            </li>
        <% } %>
    </uL>
</body>
